<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>WebAudio-Controls Live Demo (NonLinear values)</title>
<script src="https://unpkg.com/@webcomponents/custom-elements"></script>
<script>
WebAudioControlsOptions={
  useMidi:1,
  knobSrc:"../knobs/simplegray.png",
  knobSprites:100,
  knobDiameter:100,
}
</script>
<script src="../webaudio-controls.js"></script>
<script>
function input(elem){
    document.getElementById("raw").innerHTML="Raw Value : knob.value = "+elem.value;
    document.getElementById("conv").innerHTML="Converted Value : knob.convValue = "+elem.convValue;
}
function input2(elem){
    document.getElementById("raw2").innerHTML="Raw Value : knob.value = "+elem.value;
    document.getElementById("conv2").innerHTML="Converted Value : knob.convValue = "+elem.convValue;
}
</script>
</head>
<body>
<h1>webaudio-controls sample (NonLinear)</h1>
<p>This is a non-linear value knob samples. There are two approaches to realize a knob that changes nonlinearly.
</p>
<hr/>
<h2>"log" attribute</h2>
<p>If you specify log="1" as an attribute, the change in `value` will be exponential.</p>
<p>In this mode, the value increases at the same rate for a fixed rotation angle of the rotating knob.
  For example, if min="1" and max="100", it will be "10" in the center of the knob.</p>
<p>value must be able to reach from min value to max value in geometric progression. So be aware that min cannot be 0.</p>

<webaudio-knob id="knob0" min="1" max="100" log="1"></webaudio-knob>
<webaudio-param link="knob0"></webaudio-param><br/><br/>
<div style="background:#223;padding:10px;font-size:16px;color:#0f0">
<pre>
&lt;webaudio-knob id="knob0" min="1" max="100" log="1"&gt;&lt;/webaudio-knob&gt;
&lt;webaudio-param link="knob0"&gt;&lt;/webaudio-param&gt;
</pre>
</div>
<hr/>
<h2>"conv" attribute</h2>
<p>This is a example of converting a value from 0 to 100 exponentially from 1 to 10000 by "conv" attribute.</p>
<p>Here the `conv` attribute is `conv="Math.pow(10000,x/100)"`,
it means the knob's raw value range 0-100 is converted to exponential 1-10000. 
If use with &lt;webaudio-param&gt;, it will show the convValue.</p>
<p>When using with webaudio-param, 
by adding an inverse conversion expression to the `rconv` of webaudio-param attribute,
directly number-edit in webaudio-param will be possible.</p>
<p>To get converted value, use `knob.convValue` instead of `knob.value`.
</p>

<div>
<webaudio-knob id="knob1" valuetip="1" conv="Math.pow(10000,x/100)" oninput="input(this)"></webaudio-knob>
<webaudio-param link="knob1" rconv="Math.log10(x)/4*100"></webaudio-param><br/>
<div style="background:#223;padding:10px;font-size:16px;color:#0f0">
<pre>
&lt;webaudio-knob id="knob1" conv="Math.pow(10000,x/100)"&gt;&lt;/webaudio-knob&gt;
&lt;webaudio-param link="knob1" rconv="Math.log10(x)/4*100"&gt;&lt;/webaudio-param&gt;
</pre>
</div>
<div id="raw">Raw Value : knob.value = 0</div>
<div id="conv">Converted Value : knob.convValue = 1</div>
</div>
<br/>
<p>With this approach, it is possible to realize a knob that has a special action other than exponential change.</p>
<p>The following example changes exponentially from "20" to "20000" for the change of value 0-100,
   and if the converted value is 1000 or more, "kHz" is displayed, otherwise "Hz". "Display.</p>
<br/><br/>
<script>
function valueconv(x){
  x = 20*Math.pow(1000,x/100);
  if(x<=1000) return x.toFixed(2) + " Hz";
  return (x/1000).toFixed(2) + " kHz";
}
</script>
<webaudio-knob id="knob2" valuetip="1" min="0" max="100" conv="valueconv"></webaudio-knob>
<webaudio-param link="knob2" width="80"></webaudio-param><br/>
<div style="background:#223;padding:10px;font-size:16px;color:#0f0">
<pre>
&lt;script&gt;
function valueconv(x){
  x = 20 * Math.pow( 1000, x / 100 );
  if(x &lt;= 1000) return x.toFixed(2) + " Hz";
  return (x/1000).toFixed(2) + " kHz";
}
&lt;/script&gt;
&lt;webaudio-knob id="knob2" valuetip="1" min="0" max="100" conv="valueconv"&gt;&lt;/webaudio-knob&gt;
&lt;webaudio-param link="knob2" width="80"&gt;&lt;/webaudio-param>
</pre>
</div>
</body>
</html>
